# datasink-server

简单埋点日志接收服务

## API

```bash
# 上报事件
POST /t
```

```bash
# 获取每日浏览次数和人数
GET /pvuv
```

```bash
# 获取 Top10 访问页面
GET /top10
```

## Benchmark

total: 4,000,000 rows

```bash
$ autocannon -c 10 -p 1 -d 10 http://localhost:3000/pvuv-week4
┌─────────┬──────┬──────┬───────┬──────┬────────┬───────────┬─────────┐
│ Stat    │ 2.5% │ 50%  │ 97.5% │ 99%  │ Avg    │ Stdev     │ Max     │
├─────────┼──────┼──────┼───────┼──────┼────────┼───────────┼─────────┤
│ Latency │ 1 ms │ 1 ms │ 3 ms  │ 4 ms │ 4.5 ms │ 141.85 ms │ 6315 ms │
└─────────┴──────┴──────┴───────┴──────┴────────┴───────────┴─────────┘
┌───────────┬─────┬──────┬─────┬─────────┬─────────┬──────────┬─────────┐
│ Stat      │ 1%  │ 2.5% │ 50% │ 97.5%   │ Avg     │ Stdev    │ Min     │
├───────────┼─────┼──────┼─────┼─────────┼─────────┼──────────┼─────────┤
│ Req/Sec   │ 0   │ 0    │ 0   │ 5,787   │ 1,979.5 │ 2,533.91 │ 2,952   │
├───────────┼─────┼──────┼─────┼─────────┼─────────┼──────────┼─────────┤
│ Bytes/Sec │ 0 B │ 0 B  │ 0 B │ 3.45 MB │ 1.18 MB │ 1.51 MB  │ 1.76 MB │
└───────────┴─────┴──────┴─────┴─────────┴─────────┴──────────┴─────────┘
```